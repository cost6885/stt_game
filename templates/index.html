<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ë‚˜ì˜ ì½ê¸° ì‹¤ë ¥ì€?</title>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@700&display=swap" rel="stylesheet">

    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* ì›¹í°íŠ¸ ë° ë ˆì´ì•„ì›ƒ ì„¤ì • */
        body {
            font-family: 'Nanum Gothic','Arial', sans-serif;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
            line-height: 1.5;
        }

        .container {
            max-width: 600px;
            width: 100%;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.9); 
            border-radius: 10px;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }

        /* í˜ì´ì§€ ì „í™˜ êµ¬ì¡° */
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }

        /* í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        h1, h2, h3 {
            margin-bottom: 10px;
             font-size: 40px;
        }

        h4 {
            margin-bottom: 10px;
             font-size: 70px;
        }
        
        p {
            margin-bottom: 15px;
            font-size: 25px;
        }
        p3 {
            margin-bottom: 15px;
            font-size: 20px;
        }
        p2 {
            margin-top: 20px; /* ìœ„ ë¬¸ì¥ê³¼ì˜ ê°„ê²© ì¶”ê°€ */
            margin-bottom: 15px;
            font-size: 15px;
        }

        /* ë§ˆì´í¬ í…ŒìŠ¤íŠ¸ ë¬¸êµ¬ í¬ê²Œ */
        #test-instruction {
            font-size: 20px;
            font-weight: bold;
            color: #cc0000;
            line-height: 1.8; /* ì¤„ ê°„ê²© ì¶”ê°€ */
        }

        /* ê²Œì„ ë¬¸êµ¬ í¬ê²Œ + ê°•ì¡° */
        #game-text {
            font-size: 30px;
            font-weight: bold;
            color: #333;
            margin: 20px 0;
        }

        /* ìˆ¨ê¹€ í´ë˜ìŠ¤ */
        .hidden {
            display: none;
        }

        /* ë²„íŠ¼ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        button {
            padding: 14px 24px;
            font-size: 16px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
            margin-top: 20px;
        }
        button:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }

        /* ì¹´ìš´íŠ¸ë‹¤ìš´ */
        #countdown {
            font-size: 80px;
            font-weight: bold;
            color: red;
            margin-bottom: 10px;
        }

        /* ë¼ìš´ë“œ ê²°ê³¼ / ì ìˆ˜ í‘œì‹œ */
        .score-feedback {
            font-size: 40px;
            margin: 15px 0;
            font-weight: bold;
        }
        .score-feedback.good {
            color: green;
        }
        .score-feedback.normal {
            color: orange;
        }
        .score-feedback.bad {
            color: red;
        }

        #mic-status {
            padding-top: 20px;
        }

        /* ë¼ìš´ë“œ í”¼ë“œë°± í˜ì´ì§€ */
        #round-feedback-page h2 {
            font-size: 24px;
            margin-bottom: 15px;
        }
        #round-feedback-page .feedback-audio {
            margin: 10px 0;
        }
        #round-feedback-page .feedback-text {
            font-size: 20px;
            line-height: 1.4;
            margin: 15px 0;
        }
        .mismatch {
            color: red; /* ì¸ì‹ì´ í‹€ë¦° ë¶€ë¶„ ë¹¨ê°„ìƒ‰ */
            font-weight: bold;
        }

        /* formContainer ê¸°ë³¸ ìŠ¤íƒ€ì¼ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ */
        #formContainer {
            text-align: center;
            font-size: 20px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 30px 20px;
            width: 80%;
            max-width: 600px;
            border-radius: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            display: none;
        }
        
        /* ê° ì¤„(form-group)ì„ ê°€ë¡œ ì •ë ¬ (flex) */
        #formContainer .form-group {
            display: flex;
            align-items: center;      /* ì„¸ë¡œ ê°€ìš´ë° ì •ë ¬ */
            justify-content: space-between; /* ë¼ë²¨ ì™¼ìª½, í•„ë“œ ì˜¤ë¥¸ìª½ */
            margin-bottom: 15px;      /* ê° ë¼ì¸ ê°„ê²© */
            max-width: 400px;         /* ì§€ë‚˜ì¹˜ê²Œ ë„“ì–´ì§€ì§€ ì•Šë„ë¡ í­ ì œí•œ */
            margin: 0 auto 15px auto; /* ê°€ìš´ë° ì •ë ¬, ì•„ë˜ë¡œ 15px ê°„ê²© */
        }
        
        /* ë¼ë²¨ì€ ê°€ë¡œ í­ì„ ê³ ì •í•˜ê±°ë‚˜ ìµœì†Œí­ ì§€ì • (ì˜ˆ: 80~100px ì •ë„) */
        #formContainer .form-group label {
            flex: 0 0 80px; /* ë¼ë²¨ ì˜ì—­ ë„ˆë¹„ (ì¡°ì ˆ ê°€ëŠ¥) */
            text-align: right;  
            font-size: 24px;
            margin-right: 10px; /* í•„ë“œì™€ ë¼ë²¨ ì‚¬ì´ ê°„ê²© */
        }
        
        /* select, input[type="text"]ì— ê³µí†µ ìŠ¤íƒ€ì¼ */
        #formContainer select,
        #formContainer input[type="text"] {
            flex: 1;                /* ë‚¨ì€ ê³µê°„ì„ ì°¨ì§€í•˜ì—¬ í•„ë“œê°€ ì˜¤ë¥¸ìª½ ì •ë ¬ */
            max-width: 250px;       /* ì§€ë‚˜ì¹˜ê²Œ ê¸¸ì–´ì§€ì§€ ì•Šë„ë¡ ì œí•œ */
            box-sizing: border-box;
            padding: 8px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        
        /* ë²„íŠ¼ .sendform (ê¸°ì¡´ ìŠ¤íƒ€ì¼) */
        .sendform {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 5px 10px;
            text-align: center;
            display: inline-block;
            font-size: 20px;
            margin: 8px 4px;
            cursor: pointer;
            border-radius: 12px;
            transition-duration: 0.4s;
        }
        
        .sendform:hover {
            background-color: white;
            color: black;
            border: 2px solid #4CAF50;
            cursor: pointer;
        }

        
        .sendform {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 5px 10px;
            text-align: center;
            display: inline-block;
            font-size: 20px;
            margin: 8px 4px;
            cursor: pointer;
            border-radius: 12px;
            transition-duration: 0.4s;
        }
        .sendform:hover {
            background-color: white;
            color: black;
            border: 2px solid #4CAF50;
            cursor: pointer;
        }

        /* ê²Œì„ ì‹œì‘ í˜ì´ì§€ë¥¼ í™”ë©´ ì „ë©´ì— */
        #game-start-page {
            position: fixed;      
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 9999;
            background-color: rgba(0, 0, 0, 0.8); 
            display: none;       
            justify-content: center; 
            align-items: center;
        }
        #game-start-image {
            width: 400px; 
            height: auto; 
        }


        /* íƒ€ì´ë¨¸ ë°” ì»¨í…Œì´ë„ˆ */
        #progress-container {
            width: 100%;
            height: 20px;             /* ë°” ë†’ì´ */
            background-color: #ddd;   /* íšŒìƒ‰ ë°°ê²½ */
            border-radius: 10px;      /* ì‚´ì§ ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            margin: 10px auto 0 auto; /* ì¤‘ì•™ ì •ë ¬(ê°€ë¡œ), ìœ„ìª½ ì•½ê°„ ì—¬ë°± */
        }
        
        /* ì‹¤ì œ ì§„í–‰ ìƒíƒœë¥¼ í‘œì‹œí•˜ëŠ” ë°” */
        #progress-bar {
            height: 100%;
            background-color: #ff4d4d; /* ë¹¨ê°„ìƒ‰ ë°” */
            border-radius: 10px;       /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            width: 100%;               /* ì´ˆê¸° 100% (ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘ ì‹œ) */
            transition: width 1s linear; /* ë„ˆë¹„ ë³€ê²½ì„ 1ì´ˆ ë™ì•ˆ ë¶€ë“œëŸ½ê²Œ ì§„í–‰ */
        }

        /* â˜… ì¶”ê°€: ì ìˆ˜ë³„ ì´ë¯¸ì§€ í‘œì‹œ(ë°”ê¹¥ì— ìœ„ì¹˜) */
        #score-image-wrapper {
            position: fixed;
            top: 50%; /* í™”ë©´ì˜ ì„¸ë¡œ ì¤‘ì•™ */
            left: 10%; /* í™”ë©´ì˜ ê°€ë¡œ ì¤‘ì•™ */
            transform: translateY(-50%); /* ì„¸ë¡œ ë°©í–¥ ì¤‘ì‹¬ ì •ë ¬ */
            width: 360px;
            height: 360px;
            z-index: 999;
            display: none; /* ì´ˆê¸° ìˆ¨ê¹€ */
        }

        #score-image-wrapper img {
            width: 360px;
            height: 360px;
            object-fit: cover; /* ì´ë¯¸ì§€ë¥¼ 360x360 ì˜ì—­ì— ë§ì¶¤ */
        }

        /* ê°•ì¡° í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .highlight {
            color: #ff4d4d; /* ë¹¨ê°„ìƒ‰ */
            font-weight: bold;
            font-size: 1.4em; /* ì•½ê°„ ë” í¬ê²Œ */
            display: inline-block; /* ë¸”ë¡ ê°„ê²© ì¡°ì • ê°€ëŠ¥ */
            margin-top: 10px; /* ìœ„ìª½ ê°„ê²© */
        }

        /* í”¼ë“œë°± í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
        .feedback-table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse; /* í…Œì´ë¸” ê²½ê³„ì„  ê²¹ì¹¨ ì œê±° */
            text-align: left; /* ì „ì²´ ì¢Œì¸¡ ì •ë ¬ */
        }
        
        .feedback-table th,
        .feedback-table td {
            padding: 10px;
            border: 1px solid #ddd; /* ì…€ ê²½ê³„ì„  */
            font-size: 16px;
        }
        
        .feedback-table th {
            background-color: #f4f4f4; /* í—¤ë” ë°°ê²½ìƒ‰ */
            font-weight: bold; /* í—¤ë” ê°•ì¡° */
        }


        #background-image {
            position: fixed; /* í™”ë©´ì— ê³ ì • */
            top: 0; /* í™”ë©´ì˜ ë§¨ ìœ„ */
            left: 0; /* í™”ë©´ì˜ ë§¨ ì™¼ìª½ */
            width: 100%; /* í™”ë©´ ë„ˆë¹„ë§Œí¼ í™•ì¥ */
            height: 100%; /* í™”ë©´ ë†’ì´ë§Œí¼ í™•ì¥ */
            z-index: -1; /* ê°€ì¥ ë’¤ë¡œ ë³´ëƒ„ */
            overflow: hidden; /* ì˜ë¦¬ëŠ” ë¶€ë¶„ ìˆ¨ê¹€ */
        }
    
        #background-image img {
            position: absolute;
            top: 50%; /* ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
            left: 50%; /* ìˆ˜í‰ ì¤‘ì•™ ì •ë ¬ */
            transform: translate(-50%, -50%); /* ì •í™•íˆ ê°€ìš´ë° ìœ„ì¹˜ */
            opacity: 0.2; /* íˆ¬ëª…ë„ 20% ì„¤ì • */
            width: 150%; /* ì ë‹¹í•œ í¬ê¸°ë¡œ ëŠ˜ë¦¼ */
            height: auto; /* ë¹„ìœ¨ ìœ ì§€ */
            animation: rotate 60s linear infinite; /* 60ì´ˆ ë™ì•ˆ íšŒì „, ë¬´í•œ ë°˜ë³µ */
        }
    
        /* íšŒì „ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes rotate {
            0% {
                transform: translate(-50%, -50%) rotate(0deg);
            }
            100% {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }

        #rankmore {
            text-align: center;
            font-size: 17px;
            position: absolute;
            top: 0%;
            left: 85%;
            transform: translateX(-50%);
            padding: 6px;
            border-radius: 30px;
            background-color: rgba(128, 0, 128, 0.7);
            color: white;
            z-index: 500;
            display: none;
        }

        #rankmore:hover {
            background-color: white;
            color: black;
            border: 2px solid #4CAF50;
            cursor: pointer; /* ì†ê°€ë½ ëª¨ì–‘ ì»¤ì„œ */
        }

        #ranking-board-container {
            text-align: center;
            font-size: 20px;
            position: absolute;
            z-index: 1999;
            top: 12%;
            left: 50%;            
            transform: translate(-50%, -50%);
            padding: 20px 20px; /* ìƒí•˜ ì¢Œìš° íŒ¨ë”©ì„ ê°ê° 20pxê³¼ 40pxë¡œ ì„¤ì • */
            border-radius: 10px;
            display: none;
            background-color: rgba(255, 255, 0, 0.5);
            color: black;
            font-weight: bold;
            font-family: 'Nanum Gothic', 'Malgun Gothic', sans-serif;
            line-height: 1.6; /* ì¤„ ê°„ê²© ì¡°ì ˆ */
            width: 80%; /* í™”ë©´ í¬ê¸°ì˜ 80%ë¡œ ì„¤ì • */
            max-width: 600px; /* ìµœëŒ€ ê°€ë¡œ í¬ê¸° ì„¤ì • (ì˜ˆ: 1000px) */
        }

        #ranking-list div {
            margin: 0px 0; /* í•­ëª© ê°„ ê°„ê²© ì¶”ê°€ */
            padding: 2px; /* ë‚´ë¶€ ì—¬ë°± ì¶”ê°€ */            
            font-size: 17px; /* í…ìŠ¤íŠ¸ í¬ê¸° */
            font-family: 'Nanum Gothic', sans-serif; /* í°íŠ¸ ì„¤ì • */
            text-align: left; /* ì¢Œì¸¡ ì •ë ¬ */
            padding-left: 20px; /* ì¢Œì¸¡ ì—¬ë°± ì¶”ê°€ */
        }

    </style>
</head>
<body>
    <div class="container">
        <!-- Landing Page -->
        <div id="landing-page" class="page active">
            <h4>ë‚˜ì˜ ì½ê¸° ì‹¤ë ¥ì€?</h4>
            <p>
                ğŸ“˜ê²Œì„ ë°©ë²•<br>
            </p>
            <p3>
                ê²Œì„ì€ ì´ 3ë¼ìš´ë“œë¡œ ì§„í–‰ë©ë‹ˆë‹¤.<br>
                ë¼ìš´ë“œë§ˆë‹¤ ë“±ì¥í•˜ëŠ” ë¬¸ì¥ì„ ì½ì–´ë³´ì„¸ìš”.<br>
                ì½ì„ ìˆ˜ ìˆëŠ” ì œí•œì‹œê°„ì€ 10ì´ˆì…ë‹ˆë‹¤.<br>
                ë˜ë°•ë˜ë°• ì •í™•í•˜ê²Œ ì½ì–´ì•¼ ì ìˆ˜ê°€ ë†’ìŠµë‹ˆë‹¤.<br>
                ì¤€ë¹„ ë˜ì…¨ë‹¤ë©´ ê²Œì„ ì¤€ë¹„ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.<br>
            </p3>
            <p2>
                *ë³¸ ê²Œì„ì€ Speech To Text ê¸°ìˆ ì´ í™œìš©ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
            </p2>            
            <button id="start-game-btn">ê²Œì„ ì¤€ë¹„</button>
        </div>

        <!-- Microphone Test Page -->
        <div id="mic-test-page" class="page">
            <h2>ğŸ”ë§ˆì´í¬ í…ŒìŠ¤íŠ¸ğŸ“£</h2>
            <p3>ê²Œì„ì„ ì§„í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ë§ˆì´í¬ ì‚¬ìš©ì´ í•„ìˆ˜ì…ë‹ˆë‹¤.<br>
                íŒì—…ì´ ëœ¨ë©´ ë§ˆì´í¬ ì—°ê²° í—ˆìš©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.<br>
            </p3>
            <p id="test-instruction">
                ì—°ê²°ì´ ì™„ë£Œë˜ì…¨ë‹¤ë©´ ì•„ë˜ì˜ ë¬¸êµ¬ë¥¼ ë§í•´ì£¼ì„¸ìš”.<br>
                <span class="highlight">"{{ test_sentence }}"</span>                
            </p>
            <button id="test-mic-btn">ë§í•˜ê¸°</button>
            <p id="mic-status"></p>
        </div>


        <!-- Round Page -->
        <div id="round-page" class="page">
            <h2 id="round-title">ë¼ìš´ë“œ 1</h2>
            <div id="countdown">5</div>
            <p id="game-text" class="hidden"></p>
            <p id="game-status"></p>
            
            <!-- ë…¹ìŒì‹œ Progress Bar (ê¸°ë³¸ ìˆ¨ê¹€) -->
            <div id="progress-container" style="display: none;">
                <div id="progress-bar"></div>
            </div>

        </div>

        <!-- Round Feedback Page -->
        <div id="round-feedback-page" class="page">
            <h4>ë¼ìš´ë“œ ê²°ê³¼</h4>
            <div class="feedback-audio">                
                <audio id="recorded-audio" src="" controls autoplay></audio>
            </div>
            <table class="feedback-table">
                <tr>
                    <th>ì›ë¬¸</th>
                    <td id="original-text"></td>
                </tr>
                <tr>
                    <th>ì¸ì‹</th>
                    <td id="recognized-text"></td>
                </tr>
            </table>
            <p class="score-feedback" id="score-feedback-text"></p>
            <button id="next-round-btn">ë‹¤ìŒ ë¼ìš´ë“œ</button>
        </div>

    </div>

    <!-- game-start-page -->
    <!-- game_start.png -> loading.png ë¡œ ë³€ê²½ -->
    <div id="game-start-page" class="page">
        <img src="{{ url_for('static', filename='images/loading.png') }}" alt="ê²Œì„ ì‹œì‘" id="game-start-image">
    </div>

    <!-- ì ìˆ˜ë³„ ì´ë¯¸ì§€ (container ë°–) -->
    <div id="score-image-wrapper"></div>

    
    <!-- formContainer: ìµœì¢… ì ìˆ˜ ì œì¶œì„ ìœ„í•œ í¼ (ê°€ë¡œ ì •ë ¬) -->
    <div id="formContainer">
        <h2>ì´ ì ìˆ˜: <span id="final-score">0</span></h2>
    
        <div class="form-group">
            <label for="company">íšŒì‚¬</label>
            <select id="company">
                <option value="">íšŒì‚¬ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                <option value="ë†ì‹¬">ë†ì‹¬</option>
                <option value="ë†ì‹¬íƒœê²½">ë†ì‹¬íƒœê²½</option>
                <option value="ìœ¨ì´Œí™”í•™">ìœ¨ì´Œí™”í•™</option>
                <option value="ë©”ê°€ë§ˆíŠ¸">ë©”ê°€ë§ˆíŠ¸</option>
                <option value="ë†ì‹¬ì—”ì§€ë‹ˆì–´ë§">ë†ì‹¬ì—”ì§€ë‹ˆì–´ë§</option>
                <option value="ì—”ë””ì—ìŠ¤">ì—”ë””ì—ìŠ¤</option>
                <option value="ë†ì‹¬ë¯¸ë¶„">ë†ì‹¬ë¯¸ë¶„</option>
                <option value="í˜¸í…”ë†ì‹¬">í˜¸í…”ë†ì‹¬</option>
                <option value="ë†ì‹¬í™€ë”©ìŠ¤">ë†ì‹¬í™€ë”©ìŠ¤</option>
                <option value="ë†ì‹¬ìºí”¼íƒˆ">ë†ì‹¬ìºí”¼íƒˆ</option>
                <option value="ì´ìŠ¤í„´ì›°ìŠ¤">ì´ìŠ¤í„´ì›°ìŠ¤</option>
                <option value="ë‰´í…Œë¼ë‹‰ìŠ¤">ë‰´í…Œë¼ë‹‰ìŠ¤</option>
                <option value="ì—”ì—ìŠ¤ì•„ë¦¬ì•„">ì—”ì—ìŠ¤ì•„ë¦¬ì•„</option>
                <option value="ë†ì‹¬ê°œë°œ">ë†ì‹¬ê°œë°œ</option>
                <option value="ìœ¨ì´Œì¬ë‹¨">ìœ¨ì´Œì¬ë‹¨</option>
                <option value="ìºì²˜ìŠ¤">ìºì²˜ìŠ¤</option>
                <option value="ë†ì‹¬ì´ìŠ¤í¬ì¸ ">ë†ì‹¬ì´ìŠ¤í¬ì¸ </option>
            </select>
        </div>

        <div class="form-group">
            <label for="employeeId">ì‚¬ë²ˆ</label>
            <input type="text" id="employeeId" />
        </div>
    
        <div class="form-group">
            <label for="name">ì´ë¦„</label>
            <input type="text" id="name" />
        </div>
    
        <button class="sendform" onclick="sendToGoogleSheets()">ì‘ëª¨í•˜ê¸°</button>
        <button class="sendform" onclick="prapare()">ë‹¤ì‹œí•˜ê¸°</button>
    </div>

    <div id="ranking-board-container" style="display: none;">
        <h3>ğŸ“‹ ë­í‚¹ ë³´ë“œ ğŸ“‹</h3>
        <div id="ranking-list"></div>

        <!-- "ë”ë³´ê¸°" ë²„íŠ¼ ì¶”ê°€ -->
        <button id="rankmore" style="display: none;">ë”ë³´ê¸°â‹¯</button>
    </div>

    
    <div id="background-image">
        <img src="{{ url_for('static', filename='images/letters.gif') }}" alt="Background Animation">
    </div>    
    
    <!-- script.js -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
